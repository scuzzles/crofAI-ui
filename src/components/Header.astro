---
import Layer from "./Layer.astro";
import If from "./jinja/If.astro";
import { pages } from "../lib/pages";

const currentPath = Astro.url.pathname;
---

<header>
  <nav>
    {
      pages.map(({ href, title, icon, loggedInOnly }) => {
        const isSelected = currentPath.startsWith(href);
        const navItem = (
          <a class="font-label-medium" href={href}>
            <div class:list={{ content: true, selected: isSelected }}>
              <Layer />
              <svg width="24" height="24" viewBox="0 0 24 24">
                <Fragment set:html={icon} />
              </svg>
              <span>{title}</span>
            </div>
          </a>
        );

        return loggedInOnly ? <If condition="loggedin">{navItem}</If> : navItem;
      })
    }
  </nav>
</header>

<style>
  header {
    display: grid;
  }

  nav {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }

  a {
    display: flex;
    align-items: center;
    height: 4rem;
  }

  .content {
    display: flex;
    align-items: center;
    height: 2.5rem;
    border-radius: 1.25rem;
    gap: 0.5rem;
    padding-inline: 1rem;
    position: relative;
  }

  .content.selected {
    background-color: rgb(var(--m3-scheme-secondary-container));
    color: rgb(var(--m3-scheme-on-secondary-container));
  }
</style>
